<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>i586</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">DecaRange RTLS ARM Application</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">i586<div class="ingroups"><a class="el" href="group__cpu.html">Cpu</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__x86-irq"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86-irq.html">Interrupt handling for i586 boards</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__x86-multithreading"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86-multithreading.html">i586 multithreading support</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:x86_2include_2cpu_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2include_2cpu_8h.html">cpu.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86_2include_2periph__cpu_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2include_2periph__cpu_8h.html">periph_cpu.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__cmos_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__cmos_8h.html">x86_cmos.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__kernel__memory_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__kernel__memory_8h.html">x86_kernel_memory.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__memory_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__memory_8h.html">x86_memory.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__reboot_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__reboot_8h.html">x86_reboot.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__registers_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__registers_8h.html">x86_registers.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__videoram_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__videoram_8h.html">x86_videoram.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__cmos_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__cmos_8c.html">x86_cmos.c</a></td></tr>
<tr class="memdesc:x86__cmos_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessing the CMOS space of the BIOS. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__glue_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__glue_8c.html">x86_glue.c</a></td></tr>
<tr class="memdesc:x86__glue_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interface between newlib and kernel functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__memory_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__memory_8c.html">x86_memory.c</a></td></tr>
<tr class="memdesc:x86__memory_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual memory management. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__reboot_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__reboot_8c.html">x86_reboot.c</a></td></tr>
<tr class="memdesc:x86__reboot_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configurable reboot handler for x86. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__startup_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__startup_8c.html">x86_startup.c</a></td></tr>
<tr class="memdesc:x86__startup_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The common startup code for the x86 port. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__videoram_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__videoram_8c.html">x86_videoram.c</a></td></tr>
<tr class="memdesc:x86__videoram_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trivial functions to write to the videoram. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30">x86_startup</a> (void) <a class="el" href="group__core__internal.html#gaa1728270d73c5d1598de1fd691762eb1">NORETURN</a></td></tr>
<tr class="memdesc:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize subsystems and run kernel.  <a href="#ga4da4a4c6c0e0305e3d8ed93527b00e30">More...</a><br /></td></tr>
<tr class="separator:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa43719e7fdd6563a0712052975b7673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#gafa43719e7fdd6563a0712052975b7673">x86_init_board</a> (void)</td></tr>
<tr class="memdesc:gafa43719e7fdd6563a0712052975b7673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup board specific hardware and such.  <a href="#gafa43719e7fdd6563a0712052975b7673">More...</a><br /></td></tr>
<tr class="separator:gafa43719e7fdd6563a0712052975b7673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa022f72b8ab7f20f2182618845671331"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#gaa022f72b8ab7f20f2182618845671331">x86_get_memory_region</a> (uint64_t *start, uint64_t *<a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, unsigned long *<a class="el" href="x86__ports_8h.html#a91000a9df2bd7403f5b2ede2b9275bd5">cnt</a>)</td></tr>
<tr class="memdesc:gaa022f72b8ab7f20f2182618845671331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a range of usable physical memory.  <a href="#gaa022f72b8ab7f20f2182618845671331">More...</a><br /></td></tr>
<tr class="separator:gaa022f72b8ab7f20f2182618845671331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6045b176922d2db70418406c5a72fe5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#ga6045b176922d2db70418406c5a72fe5a">ARCH_HAS_ATOMIC_COMPARE_AND_SWAP</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga6045b176922d2db70418406c5a72fe5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">x86 has architecture specific atomic_cas in <a class="el" href="x86__atomic_8c.html" title="Atomic arithmetic for the x86 port. ">x86_atomic.c</a>  <a href="#ga6045b176922d2db70418406c5a72fe5a">More...</a><br /></td></tr>
<tr class="separator:ga6045b176922d2db70418406c5a72fe5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Basic definitions and forwards for x86 boards. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga6045b176922d2db70418406c5a72fe5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6045b176922d2db70418406c5a72fe5a">&#9670;&nbsp;</a></span>ARCH_HAS_ATOMIC_COMPARE_AND_SWAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARCH_HAS_ATOMIC_COMPARE_AND_SWAP&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>x86 has architecture specific atomic_cas in <a class="el" href="x86__atomic_8c.html" title="Atomic arithmetic for the x86 port. ">x86_atomic.c</a> </p>

<p class="definition">Definition at line <a class="el" href="x86_2include_2cpu_8h_source.html#l00050">50</a> of file <a class="el" href="x86_2include_2cpu_8h_source.html">cpu.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa022f72b8ab7f20f2182618845671331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa022f72b8ab7f20f2182618845671331">&#9670;&nbsp;</a></span>x86_get_memory_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool x86_get_memory_region </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a range of usable physical memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">start</td><td>Start address of the physical memory region. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>Total length of the physical memory region. One page are 0x1000 bytes. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cnt</td><td>Reentrant pointer. Must be zero on first call. The value is entirely opaque. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true iff there was a memory region set in start and len. false iff there are no more memory regions. The function must not get called again in the latter case.</dd></dl>
<p>Called by <a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30" title="Initialize subsystems and run kernel. ">x86_startup()</a> before <a class="el" href="group__x86.html#gafa43719e7fdd6563a0712052975b7673" title="Setup board specific hardware and such. ">x86_init_board()</a> gets called.</p>
<p>The memory management is one of the earliest subsystems to be set up. The uart is already configured and usable. The interrupt handling is already set up and you may call <a class="el" href="group__x86-irq.html#gaa8915cafbabacf0e9787e8914525abc8" title="Set callback function for interrupt. ">x86_interrupt_handler_set()</a>.</p>
<p>The function may return unaligned memory. In this case the begin of the region gets rounded up the the next page, and the end gets rounded down. The function may supply low memory regions, which will be ignored. The regions are expected to contain memory that lies inside the elf sections. </p>

<p class="definition">Definition at line <a class="el" href="boards_2x86-multiboot-common_2startup_8c_source.html#l00076">76</a> of file <a class="el" href="boards_2x86-multiboot-common_2startup_8c_source.html">startup.c</a>.</p>

</div>
</div>
<a id="gafa43719e7fdd6563a0712052975b7673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa43719e7fdd6563a0712052975b7673">&#9670;&nbsp;</a></span>x86_init_board()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void x86_init_board </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup board specific hardware and such. </p>
<p>Called by <a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30" title="Initialize subsystems and run kernel. ">x86_startup()</a> after all generic subsystems are activated, and before <a class="el" href="group__core__internal.html#ga0dbe43a64cbf994bf9189e7767f93342" title="Initializes scheduler and creates main and idle task. ">kernel_init()</a> gets called. Interrupts are disabled before, and are expected to be disabled after calling this function. Interrupts may be enabled during the course of this function call.</p>
<p>Probably most of the board specific initialization should be done in <a class="el" href="group__sys__autoinit.html#ga923fd92ea17c7891c288f1ddc135f112" title="Initializes all high level modules that do not require parameters for initialization or uses default ...">auto_init()</a>: </p><ul>
<li>You must not spawn <a class="el" href="thread_8h.html#a87c94d383e64a09974fc8665f82a99b3" title="Creates a new thread. ">thread_create()</a> in this function. </li>
<li>The hwtimer is not set up properly at this point of executation. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="x86__board__init_8c_source.html#l00042">42</a> of file <a class="el" href="x86__board__init_8c_source.html">x86_board_init.c</a>.</p>

</div>
</div>
<a id="ga4da4a4c6c0e0305e3d8ed93527b00e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4da4a4c6c0e0305e3d8ed93527b00e30">&#9670;&nbsp;</a></span>x86_startup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void x86_startup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize subsystems and run kernel. </p>
<p>Called by the board specific startup code. </p><ul>
<li>The .bss has to be cleared before. </li>
<li>The stack has to be set up, probably somewhere in the low memory. </li>
<li>The A20 line has to be activated, because all the code is beyond 1MB. </li>
<li>Paging must be disabled. </li>
<li>The SS, DS, and CS must span the whole 4GB of RAM. </li>
<li>32 bit protected mode must be entered. </li>
<li>Interrupts must be disabled. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="x86__startup_8c_source.html#l00053">53</a> of file <a class="el" href="x86__startup_8c_source.html">x86_startup.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 15 2017 18:57:49 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
